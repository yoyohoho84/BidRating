(this.webpackJsonpBidRating=this.webpackJsonpBidRating||[]).push([[0],{122:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(49),c=a.n(s),o=a(5),l=a.n(o),i=a(36),m=a.n(i),u=a(44),d=a(13),p=a(70),f=a(37),v=a.n(f),E=(a(77),a(45)),b=a.n(E),h=a(11),g=a.n(h),_=a(10),k=a.n(_),y=a(9),j=a.n(y),C=a(12),O=a.n(C),A=a(16),U=a.n(A),S=a(8),N=a.n(S),V=a(29),I=a.n(V),K=function(e){var t=e.id,a=e.go,n=e.fetchedUser;return r.a.createElement(g.a,{id:t},r.a.createElement(k.a,null,"Example"),n&&r.a.createElement(O.a,{title:"User Data Fetched with VK Connect"},r.a.createElement(U.a,{before:n.photo_200?r.a.createElement(I.a,{src:n.photo_200}):null,description:n.city&&n.city.title?n.city.title:""},"".concat(n.first_name," ").concat(n.last_name))),r.a.createElement(O.a,{title:"Slider"},r.a.createElement(N.a,null,r.a.createElement(j.a,{size:"xl",level:"2",onClick:a,"data-to":"slider"},"\u0421\u043b\u0430\u0439\u0434\u0435\u0440"))))},W=a(69),w=a.n(W),P=function(e){var t=e.id,a=e.go,s=Object(n.useState)(0),c=Object(d.a)(s,2),o=c[0],l=c[1];return r.a.createElement(g.a,{id:t},r.a.createElement(k.a,null,"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u0446\u0435\u043d\u0438\u0442\u0435\u043b\u0435\u0439"),r.a.createElement(O.a,{title:"Controled"},r.a.createElement(w.a,{slideWidth:"90%",align:"center",style:{height:350},slideIndex:o},r.a.createElement("div",{style:{backgroundColor:"var(--destructive)"}},"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0435\u0442 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043e \u0441\u0430\u043c\u043e\u043c \u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0438"),r.a.createElement("div",{style:{backgroundColor:"var(--button_commerce_background)"}},"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0435\u0442 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043e \u0442\u043e\u043c, \u043a\u0430\u043a \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u043f\u0440\u0438\u0431\u044b\u043b\u044c \u0437\u0430\u043d\u0438\u043c\u0430\u044f \u043c\u0435\u0441\u0442\u0430 \u0432 \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0435"),r.a.createElement("div",{style:{backgroundColor:"var(--accent)"}},"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0435\u0442 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043e \u0442\u043e\u043c, \u043a\u0430\u043a \u0432\u044b\u0432\u043e\u0434\u0438\u0442\u044c \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043d\u0443\u044e \u043f\u0440\u0438\u0431\u044b\u043b\u044c")),r.a.createElement(N.a,null,r.a.createElement(j.a,{onClick:function(){l(2===o?0:o+1)}},"\u0414\u0430\u043b\u0435\u0435"),2===o?r.a.createElement(j.a,{level:"commerce",onClick:a,"data-to":"list"},"\u041f\u043e\u043f\u0430\u0441\u0442\u044c \u0432 \u0422\u041e\u041f"):"")))},x=a(33),T=a.n(x),F=a(50),G=a.n(F),L=a(51),R=a.n(L),M=a(42),z=a.n(M),D=a(52),B=a.n(D),H=a(43),J=a.n(H),Q=a(18),q=a.n(Q),X=a(17),Y=a.n(X),Z=function(e){var t=e.idItem,a=e.first_name,n=e.last_name,s=e.avatar,c=e.price,o=e.pay;e.name,e.test;return r.a.createElement(N.a,{className:q.a.div},r.a.createElement("span",{className:q.a.listNumber},t),r.a.createElement(U.a,{className:q.a.listName,before:s?r.a.createElement(I.a,{src:s}):r.a.createElement(I.a,{src:"https://vk.com/images/camera_200.png"})},a?a+" "+n:"\u041c\u0435\u0441\u0442\u043e \u0435\u0449\u0435 \u043d\u0435 \u0437\u0430\u043d\u044f\u043b\u0438"),r.a.createElement(j.a,{id:t,className:q.a.button},c," \u0440\u0443\u0431"),r.a.createElement(j.a,{id:t,className:q.a.button,level:"commerce",onClick:o},"\u0417\u0430\u043d\u044f\u0442\u044c \u043c\u0435\u0441\u0442\u043e"))},$=a(34),ee=a.n($),te=a(38),ae=a.n(te),ne=(a(48),function(e){var t=e.id,a=e.go;return r.a.createElement(g.a,{id:t,theme:"white"},r.a.createElement(k.a,{left:r.a.createElement(Y.a,{onClick:a,"data-to":"list"})},"\u041e\u043f\u043b\u0430\u0442\u0430"),r.a.createElement(ee.a,null,r.a.createElement(ae.a,{top:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043f\u043e\u0441\u043e\u0431 \u043e\u043f\u043b\u0430\u0442\u044b",placeholder:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d",onClick:a,"data-to":"payment system"},"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d")))}),re=function(e){var t=e.id,a=e.go,n=(e.fetchedUser,e.pay),s=(e.paymentStatus,e.tabUsers),c=e.tabGroups,o=e.activeTab,l=e.dataUsers,i=(e.test,l.map((function(e){return r.a.createElement(Z,{idItem:e.id,avatar:e.avatar,price:e.price,pay:n,first_name:e.first_name,last_name:e.last_name})})));return r.a.createElement(g.a,{id:t},r.a.createElement(k.a,{left:r.a.createElement(Y.a,{onClick:a,"data-to":"slider"})},"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u0446\u0435\u043d\u0438\u0442\u0435\u043b\u0435\u0439"),r.a.createElement(G.a,{vertical:"top"},r.a.createElement(R.a,{theme:"header",type:"buttons"},r.a.createElement(B.a,null,r.a.createElement(z.a,{onClick:s,selected:"users"===o},"\u041b\u044e\u0434\u0438"),r.a.createElement(z.a,{onClick:c,selected:"groups"===o},"\u0421\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u0430")))),"users"===o?r.a.createElement(O.a,{title:"default"},r.a.createElement(T.a,null,i)):"","groups"===o?r.a.createElement(O.a,{title:"default",description:"\u0414\u0435\u0444\u043e\u043b\u0442\u043d\u044b\u0439 \u0441\u0442\u0438\u043b\u044c \u0430\u0432\u0430\u0442\u0430\u0440\u043a\u0438. \u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u0442\u0441\u044f \u0434\u043b\u044f \u044e\u0437\u0435\u0440\u043e\u0432, \u0433\u0440\u0443\u043f\u043f."},r.a.createElement(T.a,null,r.a.createElement(N.a,{className:q.a.div},r.a.createElement(J.a,{href:"https://vk.com/public187053043",target:"_blank"},r.a.createElement(U.a,{before:r.a.createElement(I.a,{src:"https://sun1-15.userapi.com/c858524/v858524205/ba47/FhvWVpJwFxw.jpg?ava=1"})},"\u0411\u0435\u0441\u043f\u043e\u043b\u0435\u0437\u043d\u044b\u0435 \u0432\u0435\u0449\u0438")),r.a.createElement(j.a,{className:q.a.button,level:"commerce",onClick:a,"data-to":"payment"},"\u0417\u0430\u043d\u044f\u0442\u044c \u043c\u0435\u0441\u0442\u043e")),r.a.createElement(N.a,{className:q.a.div},r.a.createElement(J.a,{href:"https://vk.com/by_duran",target:"_blank"},r.a.createElement(U.a,{before:r.a.createElement(I.a,{src:"https://sun9-35.userapi.com/c627331/v627331119/26946/eNxXdmHLnRA.jpg?ava=1"})},"Duran")),r.a.createElement(j.a,{className:q.a.button,level:"commerce",onClick:a,"data-to":"payment"},"\u0417\u0430\u043d\u044f\u0442\u044c \u043c\u0435\u0441\u0442\u043e")))):"",r.a.createElement(O.a,{title:"Navigation"},r.a.createElement(N.a,null,r.a.createElement(j.a,{size:"xl",level:"2",onClick:a,"data-to":"slider"},"\u0421\u043f\u0440\u0430\u0432\u043a\u0430"))))},se=function(e){var t=e.id,a=e.go;return r.a.createElement(g.a,{id:t},r.a.createElement(k.a,{left:r.a.createElement(Y.a,{onClick:a,"data-to":"payment"})},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043f\u043e\u0441\u043e\u0431 \u043e\u043f\u043b\u0430\u0442\u044b"),r.a.createElement(O.a,null,r.a.createElement(T.a,null,r.a.createElement(U.a,{onClick:a,"data-to":"vkpay"},"VK Pay"))))},ce=a(35),oe=a.n(ce),le=function(e){var t=e.id,a=e.go,s=Object(n.useState)(""),c=Object(d.a)(s,2),o=(c[0],c[1]);return r.a.createElement(g.a,{id:t,theme:"white"},r.a.createElement(k.a,{left:r.a.createElement(Y.a,{onClick:a,"data-to":"payment system"})},"\u041e\u043f\u043b\u0430\u0442\u0430"),r.a.createElement(ee.a,null,r.a.createElement(ae.a,{top:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0441\u043f\u043e\u0441\u043e\u0431 \u043e\u043f\u043b\u0430\u0442\u044b",placeholder:"\u041d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d",onClick:a,"data-to":"payment system"},"QIWI \u043a\u043e\u0448\u0435\u043b\u0435\u043a")),r.a.createElement(N.a,null,r.a.createElement(N.a,null,"\u041e\u043f\u043b\u0430\u0442\u0430 \u0447\u0435\u0440\u0435\u0437 QIWI \u043a\u043e\u0448\u0435\u043b\u0435\u043a"),r.a.createElement(ee.a,null,r.a.createElement(oe.a,{top:"\u041c\u043e\u0431\u0438\u043b\u044c\u043d\u044b\u0439 \u0442\u0435\u043b\u0435\u0444\u043e\u043d",defaultValue:"+7"}),r.a.createElement(oe.a,{top:"\u041a\u043e\u0434 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f"}),r.a.createElement(j.a,{size:"xl",onClick:function(){l.a.send("VKWebAppOpenPayForm",{app_id:7217737,action:"pay-to-group",params:{amount:100,group_id:183054783}}),o("div")}},"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c"))))},ie=function(e){var t=e.id,a=e.go,n=e.pay,s=e.onChangeHandlerInput;return r.a.createElement(g.a,{id:t,theme:"white"},r.a.createElement(k.a,{left:r.a.createElement(Y.a,{onClick:a,"data-to":"payment system"})},"\u041e\u043f\u043b\u0430\u0442\u0430"),r.a.createElement(N.a,null,r.a.createElement(N.a,null,"\u041e\u043f\u043b\u0430\u0442\u0430 \u0447\u0435\u0440\u0435\u0437 VK Pay"),r.a.createElement(ee.a,null,r.a.createElement(oe.a,{top:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e",onChange:s}),r.a.createElement(j.a,{size:"xl",onClick:n},"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c"))))},me=window.location.search.replace("?","").split("&").reduce((function(e,t){var a=t.split("=");return e[decodeURIComponent(a[0])]=decodeURIComponent(a[1]),e}),{});function ue(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,s=Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString();if(void 0!==n||void 0!==r){var c=function(e){var t=e.detail;if(t){var a=t.type,s=t.data,o=!1;"VKWebAppCallAPIMethodResult"===a?(void 0!==n&&n(s.response),o=!0):"VKWebAppCallAPIMethodFailed"===a&&(void 0!==r&&r(s),o=!0),o&&l.a.unsubscribe(c)}else console.error("invalid event",e)};l.a.subscribe(c)}t.access_token=a,void 0===t.v&&(t.v=5.103),l.a.send("VKWebAppCallAPIMethod",{method:e,params:t,request_id:s})}b.a.defaults.params=Object(p.a)({},me);var de=function(){var e=Object(n.useState)("list"),t=Object(d.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)(null),o=Object(d.a)(c,2),i=o[0],p=o[1],f=Object(n.useState)(!1),E=Object(d.a)(f,2),h=E[0],g=E[1],_=Object(n.useState)("users"),k=Object(d.a)(_,2),y=k[0],j=k[1],C=Object(n.useState)(""),O=Object(d.a)(C,2),A=O[0],U=O[1],S=Object(n.useState)(100),N=Object(d.a)(S,2),V=N[0],I=(N[1],Object(n.useState)("\u0417\u0430\u0439\u043c\u0438 \u043c\u0435\u0441\u0442\u043e \u043f\u0435\u0440\u0432\u044b\u043c \u0435\u0441\u043b\u0438 \u0443\u0441\u043f\u0435\u0435\u0448\u044c \u0435\u0441\u043b\u0438 \u043d\u0435 \u0443\u0441\u043f\u0435\u0435\u0448\u044c \u0442\u043e \u043d\u0435\u0442")),W=Object(d.a)(I,2),w=W[0],x=(W[1],Object(n.useState)([])),T=Object(d.a)(x,2),F=T[0],G=T[1],L=Object(n.useState)(null),R=Object(d.a)(L,2),M=R[0],z=R[1];function D(e){e.preventDefault();var t=e.currentTarget.id-1,a=e.currentTarget.id_vk,n=F[t].price;console.log("targetId: ",t),console.log("dataUsers: ",F),console.log("dataUsers_TARGET: ",F[t].price),l.a.send("VKWebAppOpenPayForm",{app_id:7217737,action:"pay-to-group",params:{amount:n,group_id:168803046}}),l.a.sendPromise("VKWebAppOpenPayFormResult").then((function(t){!0===e.detail.data.status&&g(!0)})).catch((function(e){console.log(e)})),b.a.get("https://rating.local/api/list.updateUsersList",{params:{id:t,id_vk:a}}).then((function(e){if(e.data.error)console.log(e.data.error);else{for(var t=[],a=0;a<e.data.response.items.length;a++)e.data.response.items[a].id_vk&&t.push(e.data.response.items[a].id_vk);var n=[];ue("users.get",{user_ids:t.join(),fields:"photo_50"},M.access_token,(function(t){n=t,console.log(n);for(var a=function(t){var a=n.find((function(a){return+a.id===+e.data.response.items[t].id_vk}));console.log(a),a&&(e.data.response.items[t].first_name=a.first_name,e.data.response.items[t].last_name=a.last_name,e.data.response.items[t].avatar=a.photo_50)},r=0;r<e.data.response.items.length;r++)a(r);console.log(e.data.response.items),G(e.data.response.items)}),(function(e){console.log(e)})),console.log("dataUsers: ",F)}})).catch((function(e){console.log(e)}))}function B(){return(B=Object(u.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.a.sendPromise("VKWebAppStorageSet",{key:"ActiveTab",value:"users"}).then((function(){l.a.sendPromise("VKWebAppStorageGet",{keys:["ActiveTab"]}).then((function(e){j(e.keys[0].value)})).catch((function(e){}))})).catch((function(e){}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function H(){return(H=Object(u.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l.a.sendPromise("VKWebAppStorageSet",{key:"ActiveTab",value:"groups"}).then((function(){l.a.sendPromise("VKWebAppStorageGet",{keys:["ActiveTab"]}).then((function(e){j(e.keys[0].value)})).catch((function(e){}))})).catch((function(e){}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(m.a.mark((function e(){var t,a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){b.a.get("https://rating.local/api/list.getUsers",{}).then((function(e){if(e.data.error)console.log(e.data.error);else{for(var t=[],n=0;n<e.data.response.items.length;n++)e.data.response.items[n].id_vk&&t.push(e.data.response.items[n].id_vk);var r=[];ue("users.get",{user_ids:t.join(),fields:"photo_50"},a.access_token,(function(t){r=t,console.log(r);for(var a=function(t){var a=r.find((function(a){return+a.id===+e.data.response.items[t].id_vk}));console.log(a),a&&(e.data.response.items[t].first_name=a.first_name,e.data.response.items[t].last_name=a.last_name,e.data.response.items[t].avatar=a.photo_50)},n=0;n<e.data.response.items.length;n++)a(n);console.log(e.data.response.items),G(e.data.response.items)}),(function(e){console.log(e)})),console.log("dataUsers: ",F)}})).catch((function(e){console.log(e)}))},e.next=3,l.a.sendPromise("VKWebAppGetUserInfo");case 3:return t=e.sent,p(t),e.next=7,l.a.sendPromise("VKWebAppGetAuthToken",{app_id:7217737,scope:""});case 7:a=e.sent,z(a.access_token),n();case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}l.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var r=document.createAttribute("scheme");r.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(r)}})),l.a.sendPromise("VKWebAppStorageGet",{keys:["ActiveTab"]}).then((function(e){j(e.keys[0].value)})).catch((function(e){})),function(){e.apply(this,arguments)}()}),[]);var J=function(e){s(e.currentTarget.dataset.to)};return r.a.createElement(v.a,{activePanel:a},r.a.createElement(K,{id:"home",fetchedUser:i,go:J}),r.a.createElement(P,{id:"slider",go:J}),r.a.createElement(re,{id:"list",fetchedUser:i,go:J,pay:D,paymentStatus:h,activeTab:y,tabUsers:function(){return B.apply(this,arguments)},tabGroups:function(){return H.apply(this,arguments)},amount:V,name:w,dataUsers:F}),r.a.createElement(ne,{id:"payment",go:J}),r.a.createElement(se,{id:"payment system",go:J}),r.a.createElement(le,{id:"qiwi",go:J}),r.a.createElement(ie,{id:"vkpay",go:J,pay:D,input:A,onChangeHandlerInput:function(e){var t=e.target.value.trim();U(t)}}))};l.a.send("VKWebAppInit"),c.a.render(r.a.createElement(de,null),document.getElementById("root"))},18:function(e,t,a){e.exports={button:"ListUsers_button__3jVmk",div:"ListUsers_div__1sDxj",Link:"ListUsers_Link__3ufk5",listNumber:"ListUsers_listNumber__29dNQ",listName:"ListUsers_listName__1YKFp"}},71:function(e,t,a){e.exports=a(122)}},[[71,1,2]]]);
//# sourceMappingURL=main.49e322f0.chunk.js.map