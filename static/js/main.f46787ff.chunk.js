(this.webpackJsonpBidRating=this.webpackJsonpBidRating||[]).push([[0],{12:function(e,t,a){e.exports={button:"ListUsers_button__3jVmk",div:"ListUsers_div__1sDxj",divText:"ListUsers_divText__1v5gJ",divHome:"ListUsers_divHome__v_nJe",divError:"ListUsers_divError__9ewW4",bold:"ListUsers_bold__1q0XK",listNumber:"ListUsers_listNumber__29dNQ",listName:"ListUsers_listName__1YKFp",listHome:"ListUsers_listHome__2XIpk",listError:"ListUsers_listError__1h7v8"}},125:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(40),o=a.n(s),c=a(7),i=a.n(c),l=a(47),u=a(31),p=a.n(u),m=a(8),d=a(37),f=a(42),g=a.n(f),v=(a(73),a(28)),b=a.n(v),_=a(36),h=a.n(_),E=a(41),O=a.n(E),j=a(35),k=a.n(j),S=a(30),y=a.n(S),U=a(45),N=a.n(U),P=a(11),V=a.n(P),A=a(46),G=a.n(A),I=a(62),K=a.n(I),L=a(63),C=a.n(L),T=a(44),W=a.n(T),w=a(64),x=a.n(w),H=a(61),R=(a(93),a(24)),D=a.n(R),F=a(34),J=a.n(F),z=a(27),B=a.n(z),X=a(12),$=a.n(X),q=function(e){var t=e.idItem,a=e.first_name,n=e.last_name,s=e.avatar,o=e.price,c=e.pay,i=e.idVk,l=e.getPlatform,u="https://vk.com/id"+i;return r.a.createElement(V.a,{className:$.a.div},r.a.createElement("span",{className:$.a.listNumber},t),r.a.createElement(J.a,{className:$.a.listName,before:s?r.a.createElement(B.a,{src:s}):r.a.createElement(B.a,{src:"https://vk.com/images/camera_200.png"}),description:"\u0426\u0435\u043d\u0430: "+o+" \u0440\u0443\u0431",href:0===i?"":u},a?a+" "+n:"\u041c\u0435\u0441\u0442\u043e \u0434\u043b\u044f \u0442\u0435\u0431\u044f"),"iOS"===l?r.a.createElement(D.a,{id:t,className:$.a.button,level:"disabled"},"\u0417\u0430\u043d\u044f\u0442\u044c"):r.a.createElement(D.a,{id:t,className:$.a.button,level:"commerce",onClick:c},"\u0417\u0430\u043d\u044f\u0442\u044c"))},Q=function(e){var t=e.idItem,a=e.avatar,n=e.price,s=e.name,o=e.go,c=e.idVkGroup,i=e.getPlatform,l="https://vk.com/public"+c;return r.a.createElement(V.a,{className:$.a.div},r.a.createElement("span",{className:$.a.listNumber},t),r.a.createElement(J.a,{className:$.a.listName,before:a?r.a.createElement(B.a,{src:a}):r.a.createElement(B.a,{src:"https://vk.com/images/camera_200.png"}),description:"\u0426\u0435\u043d\u0430: "+n+" \u0440\u0443\u0431",href:0===c?"":l},s||"\u041c\u0435\u0441\u0442\u043e \u0434\u043b\u044f \u0433\u0440\u0443\u043f\u043f\u044b"),"iOS"===i?r.a.createElement(D.a,{id:t,className:$.a.button,level:"disabled"},"\u0417\u0430\u043d\u044f\u0442\u044c"):r.a.createElement(D.a,{id:t,className:$.a.button,level:"commerce",onClick:o,"data-to":"vkpay"},"\u0417\u0430\u043d\u044f\u0442\u044c"))},Y=function(e){var t=e.id,a=e.go,n=e.pay,s=e.tabUsers,o=e.tabGroups,c=e.activeTab,i=e.dataUsers,l=e.test,u=e.dataGroups,p=e.getPlatform,m=Object(H.a)(),d=(m.isOnline,m.isOffline),f=i.map((function(e){return r.a.createElement(q,{key:e.id,idItem:e.id,idVk:e.id_vk,avatar:e.avatar,price:e.price,pay:n,first_name:e.first_name,last_name:e.last_name,test:l,getPlatform:p})})),g=u.map((function(e){return r.a.createElement(Q,{key:e.id,idItem:e.id,avatar:e.avatar,price:e.price,go:a,name:e.name,idVkGroup:e.id_group,getPlatform:p})}));return r.a.createElement(k.a,{id:t},r.a.createElement(y.a,null,"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u043b\u0438\u0434\u0435\u0440\u043e\u0432"),r.a.createElement(K.a,{vertical:"top"},r.a.createElement(C.a,{theme:"header",type:"buttons"},r.a.createElement(x.a,null,r.a.createElement(W.a,{onClick:s,selected:"users"===c},"\u041b\u044e\u0434\u0438"),r.a.createElement(W.a,{onClick:o,selected:"groups"===c},"\u0421\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u0430")))),d?r.a.createElement(V.a,{className:"divSpinner"},r.a.createElement(h.a,{size:"large"}),r.a.createElement(V.a,null,"\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442 - \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435!")):r.a.createElement(r.a.Fragment,null,"users"===c?r.a.createElement(N.a,{title:"default",description:"\u041a\u0430\u0436\u0434\u043e\u0435 \u043c\u0435\u0441\u0442\u043e \u043f\u043e\u043a\u0443\u043f\u0430\u0435\u0442\u0441\u044f \u043d\u0430 14 \u0434\u043d\u0435\u0439.\u041f\u0440\u0438 \u043a\u0430\u0436\u0434\u043e\u0439 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0439 \u043f\u043e\u043a\u0443\u043f\u043a\u0435 \u043c\u0435\u0441\u0442\u0430, \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442 - 1,1 \u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f + 3 \u0434\u043d\u044f \u043a \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u043f\u0440\u0435\u0431\u044b\u0432\u0430\u043d\u0438\u044f \u0432 \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0435. \u0412\u044b\u0448\u0435 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043c\u0435\u0441\u0442\u0430 - \u0434\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u043f\u0440\u0435\u0431\u044b\u0432\u0430\u043d\u0438\u044f \u0432 \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0435."},"iOS"===p?r.a.createElement(V.a,null,"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u043f\u043b\u0430\u0442\u0435\u0436\u0438 \u0432 \u0434\u0430\u043d\u043d\u043e\u043c \u0441\u0435\u0440\u0432\u0438\u0441\u0435 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u043d\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u0445 \u0441 \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 iOS"):"",r.a.createElement(G.a,null,f)):"","groups"===c?r.a.createElement(N.a,{title:"default",description:"\u041a\u0430\u0436\u0434\u043e\u0435 \u043c\u0435\u0441\u0442\u043e \u043f\u043e\u043a\u0443\u043f\u0430\u0435\u0442\u0441\u044f \u043d\u0430 14 \u0434\u043d\u0435\u0439.\u041f\u0440\u0438 \u043a\u0430\u0436\u0434\u043e\u0439 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e\u0439 \u043f\u043e\u043a\u0443\u043f\u043a\u0435 \u043c\u0435\u0441\u0442\u0430, \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0443\u0432\u0435\u043b\u0438\u0447\u0438\u0432\u0430\u0435\u0442\u0441\u044f \u043d\u0430 \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442 - 1,1 \u0438 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0435\u0442\u0441\u044f + 3 \u0434\u043d\u044f \u043a \u0432\u0440\u0435\u043c\u0435\u043d\u0438 \u043f\u0440\u0435\u0431\u044b\u0432\u0430\u043d\u0438\u044f \u0432 \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0435. \u0412\u044b\u0448\u0435 \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u043c\u0435\u0441\u0442\u0430 - \u0434\u043b\u0438\u0442\u0435\u043b\u044c\u043d\u0435\u0435 \u0432\u0440\u0435\u043c\u044f \u043f\u0440\u0435\u0431\u044b\u0432\u0430\u043d\u0438\u044f \u0432 \u0440\u0435\u0439\u0442\u0438\u043d\u0433\u0435."},"iOS"===p?"":r.a.createElement(V.a,null,"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u043f\u043b\u0430\u0442\u0435\u0436\u0438 \u0432 \u0434\u0430\u043d\u043d\u043e\u043c \u0441\u0435\u0440\u0432\u0438\u0441\u0435 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u044e\u0442 \u043d\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u0445 \u0441 \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 iOS"),r.a.createElement(G.a,null,g)):""))},M=a(66),Z=a.n(M),ee=a(65),te=a.n(ee),ae=a(43),ne=a.n(ae),re=function(e){var t=e.id,a=e.go,n=e.onChangeHandlerInput,s=e.reg,o=e.payGroups;return r.a.createElement(k.a,{id:t,theme:"white"},r.a.createElement(y.a,{left:r.a.createElement(ne.a,{onClick:a,"data-to":"list"})},"\u041e\u043f\u043b\u0430\u0442\u0430"),r.a.createElement(V.a,null,r.a.createElement(V.a,null,"\u041e\u043f\u043b\u0430\u0442\u0430 \u0447\u0435\u0440\u0435\u0437 VK Pay"),r.a.createElement(te.a,null,r.a.createElement(Z.a,{top:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0433\u0440\u0443\u043f\u043f\u0443",onChange:n,status:s?"valid":"error",bottom:s?"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0433\u0440\u0443\u043f\u043f\u0443 \u0432\u0432\u0435\u0434\u0435\u043d\u0430 \u0432\u0435\u0440\u043d\u043e!":"\u0421\u0441\u044b\u043b\u043a\u0430 \u0432\u0432\u0435\u0434\u0435\u043d\u0430 \u043d\u0435\u0432\u0435\u0440\u043d\u043e"}),r.a.createElement(D.a,{size:"xl",onClick:o},"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c"))))};var se=function(e){return"https://rating01.ru/api/"+e},oe=window.location.search.replace("?","").split("&").reduce((function(e,t){var a=t.split("=");return e[decodeURIComponent(a[0])]=decodeURIComponent(a[1]),e}),{});b.a.defaults.params=Object(d.a)({},oe);var ce=function(){var e=Object(n.useState)("list"),t=Object(m.a)(e,2),a=t[0],s=t[1],o=Object(n.useState)(null),c=Object(m.a)(o,2),u=c[0],f=c[1],v=Object(n.useState)(0),_=Object(m.a)(v,2),E=(_[0],_[1]),O=Object(n.useState)(!1),j=Object(m.a)(O,2),k=j[0],S=j[1],y=Object(n.useState)("users"),U=Object(m.a)(y,2),N=U[0],P=U[1],V=Object(n.useState)(""),A=Object(m.a)(V,2),G=A[0],I=A[1],K=Object(n.useState)([]),L=Object(m.a)(K,2),C=L[0],T=L[1],W=Object(n.useState)([]),w=Object(m.a)(W,2),x=w[0],H=w[1],R=Object(n.useState)(),D=Object(m.a)(R,2),F=D[0],J=D[1],z=Object(n.useState)(0),B=Object(m.a)(z,2),X=B[0],$=B[1],q=Object(n.useState)(0),Q=Object(m.a)(q,2),M=Q[0],Z=Q[1],ee=Object(n.useState)(r.a.createElement(h.a,{size:"large"})),te=Object(m.a)(ee,2),ae=te[0],ne=te[1],oe=Object(n.useState)(""),ce=Object(m.a)(oe,2),ie=ce[0],le=ce[1];function ue(e){e.preventDefault();var t=e.currentTarget.id-1,a=u.id,n=C[t].price;i.a.sendPromise("VKWebAppOpenPayForm",{app_id:7217737,action:"pay-to-group",params:{amount:n,group_id:189974647}}).then((function(e){console.log("RES_USERS:",e),(e.status||e.result.status)&&(S(!0),console.log("\u041e\u041f\u041b\u0410\u0422\u0410 \u041f\u0420\u041e\u0428\u041b\u0410 1"),b.a.get(se("list.updateUsersList"),{params:{id:t+1,id_vk:a}}).then((function(e){if(e.data.error)console.log(e.data.error);else{console.log("Id_Users_updateUsersList:",a),s("list"),console.log("\u041e\u041f\u041b\u0410\u0422\u0410 \u041f\u0420\u041e\u0428\u041b\u0410: 2",C);var n=Object(l.a)(C);n[t]=Object(d.a)({},n[t],{id_vk:u.id,first_name:u.first_name,last_name:u.last_name,avatar:u.photo_200,price:e.data.response.price}),T(n)}})).catch((function(e){console.log(e)}))),console.log(e.status)})).catch((function(e){console.log(e)}))}Object(n.useEffect)((function(){b.a.get(se("sys.first"),{}).then((function(e){e.data.error?console.log("\u041e\u0428\u0418\u0411\u041a\u0410 \u0414\u0410\u041d\u041d\u042b\u0425 \u0413\u0420\u0423\u041f\u041f:",e.data.error):(console.log(e),T(e.data.response.users),H(e.data.response.groups))})).catch((function(e){console.log(e)}))}),[]),Object(n.useEffect)((function(){i.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var r=document.createAttribute("scheme");r.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(r)}})),i.a.sendPromise("VKWebAppGetClientVersion").then((function(e){console.log("\u0412\u0415\u0420\u0421\u0418\u042f \u041f\u0420\u0418\u041b\u041e\u0416\u0415\u041d\u0418\u042f:",e),"iOS"===e.platform&&le("iOS")})).catch((function(e){console.log(e)})),i.a.sendPromise("VKWebAppStorageGet",{keys:["ActiveTab","activePanel","button"]}).then((function(e){P(e.keys[0].value)})).catch((function(e){console.log(e)})),function(){var e,t;p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.awrap(i.a.sendPromise("VKWebAppGetUserInfo"));case 2:e=a.sent,f(e),t=e.id,E(t),ne(null);case 7:case"end":return a.stop()}}))}()}),[]);var pe=function(e){e.preventDefault();var t=e.currentTarget.dataset.to;s(t),J(!1);var a=e.currentTarget.id-1;$(a),console.log("ID \u0414\u041e",a),Z(x[a].price),console.log("\u0426\u0415\u041d\u0410 \u041f\u041e\u0421\u041b\u0415",M)};return r.a.createElement(g.a,{activePanel:a,popout:ae},r.a.createElement(Y,{id:"list",fetchedUser:u,go:pe,pay:ue,paymentStatus:k,activeTab:N,tabUsers:function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:i.a.sendPromise("VKWebAppStorageSet",{key:"ActiveTab",value:"users"}).then((function(){i.a.sendPromise("VKWebAppStorageGet",{keys:["ActiveTab"]}).then((function(e){P(e.keys[0].value)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}))},tabGroups:function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:i.a.sendPromise("VKWebAppStorageSet",{key:"ActiveTab",value:"groups"}).then((function(){i.a.sendPromise("VKWebAppStorageGet",{keys:["ActiveTab"]}).then((function(e){P(e.keys[0].value)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}))},dataUsers:C,dataGroups:x,getPlatform:ie}),r.a.createElement(re,{id:"vkpay",go:pe,pay:ue,onChangeHandlerInput:function(e){var t=e.target.value.trim(),a=/^https:|Https:\/\/vk\.com\/(?!id\d)[^\/]*$/.test(t),n=/^vk\.com\/(?!id\d)[^\/]*$/.test(t),r=t.slice(15),s=t.slice(7);console.log("valueSlice1:",r),console.log("valueSlice2:",s),a?(I(r),J(!0)):(J(!1),n?(I(s),J(!0)):J(!1))},reg:F,payGroups:function(e){e.preventDefault();var t=G;console.log("inputValue",t),b.a.get(se("sys.checkGroup"),{params:{id_group:t}}).then((function(e){if(e.data.error)return console.log(e.data.error),void J(!1);J(!0),i.a.sendPromise("VKWebAppOpenPayForm",{app_id:7217737,action:"pay-to-group",params:{amount:M,group_id:189974647}}).then((function(e){(e.status||e.result.status)&&(S(!0),console.log("\u041e\u041f\u041b\u0410\u0422\u0410 \u041f\u0420\u041e\u0428\u041b\u0410 1"),b.a.get(se("list.updateGroupsList"),{params:{id:X+1,id_group:t}}).then((function(e){if(e.data.error)console.log(e.data.error);else{console.log("Id_Group_updateGroupsList:",G),s("list"),console.log("\u041e\u041f\u041b\u0410\u0422\u0410 \u041f\u0420\u041e\u0428\u041b\u0410: 2",x);var a=Object(l.a)(x);a[X]=Object(d.a)({},a[X],{id_group:t,name:e.data.response.group.name,avatar:e.data.response.group.photo_200,price:e.data.response.price}),H(a),I("")}})).catch((function(e){console.log(e)}))),console.log(e.status)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}}))};i.a.send("VKWebAppInit");var ie=document.getElementById("root");O()(ie),o.a.render(r.a.createElement(ce,null),ie)},67:function(e,t,a){e.exports=a(125)},93:function(e,t,a){}},[[67,1,2]]]);
//# sourceMappingURL=main.f46787ff.chunk.js.map