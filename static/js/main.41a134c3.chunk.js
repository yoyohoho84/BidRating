(this.webpackJsonpBidRating=this.webpackJsonpBidRating||[]).push([[0],{12:function(e,t,a){e.exports={button:"ListUsers_button__3jVmk",btnDisabled:"ListUsers_btnDisabled__3GPv9",div:"ListUsers_div__1sDxj",divText:"ListUsers_divText__1v5gJ",divHome:"ListUsers_divHome__v_nJe",divError:"ListUsers_divError__9ewW4",bold:"ListUsers_bold__1q0XK",listNumber:"ListUsers_listNumber__29dNQ",listName:"ListUsers_listName__1YKFp",listHome:"ListUsers_listHome__2XIpk",listError:"ListUsers_listError__1h7v8"}},124:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(40),c=a.n(r),o=a(7),i=a.n(o),l=a(45),u=a(25),p=a.n(u),m=a(8),d=a(37),f=a(41),v=a.n(f),g=a(66),b=a.n(g),_=(a(74),a(30)),h=a.n(_),E=a(36),O=a.n(E),k=a(35),j=a.n(k),y=a(32),S=a.n(y),N=a(9),U=a.n(N),P=a(44),w=a.n(P),V=a(61),G=a.n(V),x=a(62),A=a.n(x),I=a(43),T=a.n(I),K=a(63),L=a.n(K),C=a(60),W=(a(94),a(28)),H=a.n(W),D=a(29),R=a.n(D),B=a(24),F=a.n(B),J=a(12),z=a.n(J),X=function(e){var t=e.idItem,a=e.first_name,n=e.last_name,r=e.avatar,c=e.price,o=e.pay,i=e.idVk,l=e.getPlatform,u="https://vk.com/id"+i;return s.a.createElement(U.a,{className:z.a.div},s.a.createElement("span",{className:z.a.listNumber},t),"ios"===l?s.a.createElement(R.a,{className:z.a.listName,before:r?s.a.createElement(F.a,{src:r}):s.a.createElement(F.a,{src:"https://vk.com/images/camera_200.png"}),href:0===i?"":u},a?a+" "+n:"\u041c\u0435\u0441\u0442\u043e \u0434\u043b\u044f \u0442\u0435\u0431\u044f"):s.a.createElement(R.a,{className:z.a.listName,before:r?s.a.createElement(F.a,{src:r}):s.a.createElement(F.a,{src:"https://vk.com/images/camera_200.png"}),description:"\u0426\u0435\u043d\u0430: "+c+" \u0440\u0443\u0431",href:0===i?"":u},a?a+" "+n:"\u041c\u0435\u0441\u0442\u043e \u0434\u043b\u044f \u0442\u0435\u0431\u044f"),"ios"===l?"":s.a.createElement(H.a,{id:t,className:z.a.button,level:"commerce",onClick:o},"\u0417\u0430\u043d\u044f\u0442\u044c"))},$=function(e){var t=e.idItem,a=e.avatar,n=e.price,r=e.name,c=e.go,o=e.idVkGroup,i=e.getPlatform,l="https://vk.com/public"+o;return s.a.createElement(U.a,{className:z.a.div},s.a.createElement("span",{className:z.a.listNumber},t),"ios"===i?s.a.createElement(R.a,{className:z.a.listName,before:a?s.a.createElement(F.a,{src:a}):s.a.createElement(F.a,{src:"https://vk.com/images/community_200.png"}),href:0===o?"":l},r||"\u041c\u0435\u0441\u0442\u043e \u0434\u043b\u044f \u0433\u0440\u0443\u043f\u043f\u044b"):s.a.createElement(R.a,{className:z.a.listName,before:a?s.a.createElement(F.a,{src:a}):s.a.createElement(F.a,{src:"https://vk.com/images/community_200.png"}),description:"\u0426\u0435\u043d\u0430: "+n+" \u0440\u0443\u0431",href:0===o?"":l},r||"\u041c\u0435\u0441\u0442\u043e \u0434\u043b\u044f \u0433\u0440\u0443\u043f\u043f\u044b"),"ios"===i?"":s.a.createElement(H.a,{id:t,className:z.a.button,level:"commerce",onClick:c,"data-to":"vkpay"},"\u0417\u0430\u043d\u044f\u0442\u044c"))},q=function(e){var t=e.id,a=e.go,n=e.pay,r=e.tabUsers,c=e.tabGroups,o=e.activeTab,i=e.dataUsers,l=e.test,u=e.dataGroups,p=e.getPlatform,m=Object(C.a)(),d=(m.isOnline,m.isOffline),f=i.map((function(e){return s.a.createElement(X,{key:e.id,idItem:e.id,idVk:e.id_vk,avatar:e.avatar,price:e.price,pay:n,first_name:e.first_name,last_name:e.last_name,test:l,getPlatform:p})})),v=u.map((function(e){return s.a.createElement($,{key:e.id,idItem:e.id,avatar:e.avatar,price:e.price,go:a,name:e.name,idVkGroup:e.id_group,getPlatform:p})}));return s.a.createElement(j.a,{id:t},s.a.createElement(S.a,null,"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u043b\u0438\u0434\u0435\u0440\u043e\u0432"),s.a.createElement(G.a,{vertical:"top"},s.a.createElement(A.a,{theme:"header"},s.a.createElement(L.a,null,s.a.createElement(T.a,{onClick:r,selected:"users"===o},"\u041b\u044e\u0434\u0438"),s.a.createElement(T.a,{onClick:c,selected:"groups"===o},"\u0421\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u0430")))),d?s.a.createElement(U.a,{className:"divSpinner"},s.a.createElement(O.a,{size:"large"}),s.a.createElement(U.a,null,"\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u0438\u043d\u0442\u0435\u0440\u043d\u0435\u0442 - \u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435!")):s.a.createElement(s.a.Fragment,null,"users"===o?s.a.createElement(U.a,{className:"divHeader"},"ios"===p?s.a.createElement(U.a,null,"\u0414\u0430\u043d\u043d\u044b\u0439 \u0441\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043d\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u0445 \u0441 \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 iOS"):"",s.a.createElement(w.a,null,f)):"","groups"===o?s.a.createElement(U.a,{className:"divHeader"},"ios"===p?s.a.createElement(U.a,null,"\u041a \u0441\u043e\u0436\u0430\u043b\u0435\u043d\u0438\u044e, \u0434\u0430\u043d\u043d\u044b\u0439 \u0441\u0435\u0440\u0432\u0438\u0441 \u043d\u0435 \u0440\u0430\u0431\u043e\u0442\u0430\u0435\u0442 \u043d\u0430 \u0443\u0441\u0442\u0440\u043e\u0439\u0441\u0442\u0432\u0430\u0445 \u0441 \u0441\u0438\u0441\u0442\u0435\u043c\u043e\u0439 iOS"):"",s.a.createElement(w.a,null,v)):""))},Q=a(65),Y=a.n(Q),M=a(64),Z=a.n(M),ee=a(42),te=a.n(ee),ae=function(e){var t=e.id,a=e.go,n=e.onChangeHandlerInput,r=e.reg,c=e.payGroups,o=e.hadResponse,i=""===e.input;return s.a.createElement(j.a,{id:t,theme:"white"},s.a.createElement(S.a,{left:s.a.createElement(te.a,{onClick:a,"data-to":"list"})},"\u041e\u043f\u043b\u0430\u0442\u0430"),s.a.createElement(U.a,null,s.a.createElement(U.a,null,"\u041e\u043f\u043b\u0430\u0442\u0430 \u0447\u0435\u0440\u0435\u0437 VK Pay"),s.a.createElement(Z.a,null,s.a.createElement(Y.a,{top:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443 \u043d\u0430 \u0433\u0440\u0443\u043f\u043f\u0443",onChange:n,status:i?"":o?r?"valid":"error":"",bottom:i?"":o?r?"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0433\u0440\u0443\u043f\u043f\u0443 \u0432\u0432\u0435\u0434\u0435\u043d\u0430 \u0432\u0435\u0440\u043d\u043e!":"\u0421\u0441\u044b\u043b\u043a\u0430 \u0432\u0432\u0435\u0434\u0435\u043d\u0430 \u043d\u0435\u0432\u0435\u0440\u043d\u043e":""}),s.a.createElement(H.a,{size:"xl",onClick:c},"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c"))))};var ne=function(e){return"https://rating01.ru/api/"+e},se=window.location.search.replace("?","").split("&").reduce((function(e,t){var a=t.split("=");return e[decodeURIComponent(a[0])]=decodeURIComponent(a[1]),e}),{});h.a.defaults.params=Object(d.a)({},se);var re=function(){var e=Object(n.useState)("list"),t=Object(m.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(null),o=Object(m.a)(c,2),u=o[0],f=o[1],g=Object(n.useState)(0),_=Object(m.a)(g,2),E=(_[0],_[1]),k=Object(n.useState)(!1),j=Object(m.a)(k,2),y=j[0],S=j[1],N=Object(n.useState)("users"),U=Object(m.a)(N,2),P=U[0],w=U[1],V=Object(n.useState)(""),G=Object(m.a)(V,2),x=G[0],A=G[1],I=Object(n.useState)([]),T=Object(m.a)(I,2),K=T[0],L=T[1],C=Object(n.useState)([]),W=Object(m.a)(C,2),H=W[0],D=W[1],R=Object(n.useState)(),B=Object(m.a)(R,2),F=B[0],J=B[1],z=Object(n.useState)(!1),X=Object(m.a)(z,2),$=X[0],Q=X[1],Y=Object(n.useState)(0),M=Object(m.a)(Y,2),Z=M[0],ee=M[1],te=Object(n.useState)(0),se=Object(m.a)(te,2),re=se[0],ce=se[1],oe=Object(n.useState)(s.a.createElement(O.a,{size:"large"})),ie=Object(m.a)(oe,2),le=ie[0],ue=ie[1],pe=Object(n.useState)(""),me=Object(m.a)(pe,2),de=me[0],fe=me[1],ve=Object(n.useState)(["list"]),ge=Object(m.a)(ve,2);ge[0],ge[1];function be(e){var t,a,n,s;return p.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return e.preventDefault(),t=e.currentTarget.id-1,a=u.id,n=K[t].price,s={},c.prev=5,c.next=8,p.a.awrap(h.a.get(ne("list.addOrderUser"),{params:{id:t+1}}));case 8:s=c.sent,c.next=14;break;case 11:c.prev=11,c.t0=c.catch(5),console.error(c.t0);case 14:i.a.sendPromise("VKWebAppOpenPayForm",{app_id:7217737,action:"pay-to-group",params:{amount:n,group_id:189974647}}).then((function(e){if(console.log("RES_USERS:",e),e.status||e.result.status){S(!0),console.log("\u041e\u041f\u041b\u0410\u0422\u0410 \u041f\u0420\u041e\u0428\u041b\u0410 1"),console.log(e),console.log("Id_Users_updateUsersList:",a),r("list"),console.log("\u041e\u041f\u041b\u0410\u0422\u0410 \u041f\u0420\u041e\u0428\u041b\u0410: 2",K);var n=Object(l.a)(K);n[t]=Object(d.a)({},n[t],{id_vk:u.id,first_name:u.first_name,last_name:u.last_name,avatar:u.photo_200,price:s.data.response.price}),L(n)}console.log(e.status)})).catch((function(e){console.log(e)}));case 15:case"end":return c.stop()}}),null,null,[[5,11]])}Object(n.useEffect)((function(){window.addEventListener("popstate",(function(e){return e.preventDefault()&(r("list"),void A(""))}))}),[]),Object(n.useEffect)((function(){h.a.get(ne("sys.first"),{}).then((function(e){e.data.error?console.log("\u041e\u0428\u0418\u0411\u041a\u0410 \u0414\u0410\u041d\u041d\u042b\u0425 \u0413\u0420\u0423\u041f\u041f:",e.data.error):(console.log(e),L(e.data.response.users),D(e.data.response.groups))})).catch((function(e){console.log(e)}))}),[]),Object(n.useEffect)((function(){i.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var s=document.createAttribute("scheme");s.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(s)}})),i.a.sendPromise("VKWebAppGetClientVersion").then((function(e){console.log("\u0412\u0415\u0420\u0421\u0418\u042f \u041f\u0420\u0418\u041b\u041e\u0416\u0415\u041d\u0418\u042f:",e),"ios"===e.platform&&fe("ios")})).catch((function(e){console.log(e)})),i.a.sendPromise("VKWebAppStorageGet",{keys:["ActiveTab","activePanel","button"]}).then((function(e){w(e.keys[0].value)})).catch((function(e){console.log(e)})),function(){var e,t;p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,p.a.awrap(i.a.sendPromise("VKWebAppGetUserInfo"));case 2:e=a.sent,f(e),t=e.id,E(t),ue(null);case 7:case"end":return a.stop()}}))}()}),[]);var _e=function(e){e.preventDefault();var t=e.currentTarget.dataset.to;r(t),window.history.pushState({panel:e.currentTarget.dataset.to},"".concat(e.currentTarget.dataset.to));var a=e.currentTarget.id-1;ee(a),console.log("ID \u0414\u041e",a),ce(H[a].price),console.log("\u0426\u0415\u041d\u0410 \u041f\u041e\u0421\u041b\u0415",re),A("")};return s.a.createElement(b.a,{isWebView:!0},s.a.createElement(v.a,{activePanel:a,popout:le,onSwipeBack:function(){r("list")}},s.a.createElement(q,{id:"list",fetchedUser:u,go:_e,pay:be,paymentStatus:y,activeTab:P,tabUsers:function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:i.a.sendPromise("VKWebAppStorageSet",{key:"ActiveTab",value:"users"}).then((function(){i.a.sendPromise("VKWebAppStorageGet",{keys:["ActiveTab"]}).then((function(e){w(e.keys[0].value)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}))},tabGroups:function(){return p.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:i.a.sendPromise("VKWebAppStorageSet",{key:"ActiveTab",value:"groups"}).then((function(){i.a.sendPromise("VKWebAppStorageGet",{keys:["ActiveTab"]}).then((function(e){w(e.keys[0].value)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}));case 1:case"end":return e.stop()}}))},dataUsers:K,dataGroups:H,getPlatform:de}),s.a.createElement(ae,{id:"vkpay",go:_e,pay:be,onChangeHandlerInput:function(e){var t=e.target.value.trim(),a=/^https:\/\/vk\.com\/(?!id\d)[^\/]*|Https:\/\/vk\.com\/(?!id\d)[^\/]*$/.test(t),n=/^vk\.com\/(?!id\d)[^\/]*$/.test(t),s=t.slice(15),r=t.slice(7);console.log("valueSlice1:",s),console.log("valueSlice2:",r),a?A(s):(J(!1),n&&A(r))},reg:F,hadResponse:$,payGroups:function(e){var t;return p.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:e.preventDefault(),t=x,console.log("inputValue",t),Q(!0),h.a.get(ne("sys.checkGroup"),{params:{id_group:t}}).then((function(e){var a;return p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log(e),!e.data.error){n.next=5;break}return console.log(e.data.error),J(!1),n.abrupt("return");case 5:return a={},n.prev=6,n.next=9,p.a.awrap(h.a.get(ne("list.addOrderGroup"),{params:{id:Z+1,id_group:e.data.response.id}}));case 9:a=n.sent,n.next=15;break;case 12:n.prev=12,n.t0=n.catch(6),console.error(n.t0);case 15:console.log("checkGroup",e),J(!0),i.a.sendPromise("VKWebAppOpenPayForm",{app_id:7217737,action:"pay-to-group",params:{amount:re,group_id:189974647,data:{my_sign:"dsfdsffds"},sign:"sadsaas"}}).then((function(e){if(e.status||e.result.status){S(!0),console.log("\u041e\u041f\u041b\u0410\u0422\u0410 \u041f\u0420\u041e\u0428\u041b\u0410 1"),console.log("Id_Group_updateGroupsList:",x),console.log("\u041e\u041f\u041b\u0410\u0422\u0410 \u041f\u0420\u041e\u0428\u041b\u0410: 2",H);var n=Object(l.a)(H);n[Z]=Object(d.a)({},n[Z],{id_group:t,name:a.data.response.group.name,avatar:a.data.response.group.photo_200,price:a.data.response.price}),D(n),r("list")}console.log(e.status)})).catch((function(e){console.log(e),J(),Q(!1),console.log("INPUT 3",x)}));case 18:case"end":return n.stop()}}),null,null,[[6,12]])})).catch((function(e){console.log(e)}));case 5:case"end":return a.stop()}}))},activePanel:a,input:x})))},ce=a(67),oe=a.n(ce);i.a.send("VKWebAppInit");var ie=document.getElementById("root");oe()(ie),c.a.render(s.a.createElement(re,null),ie)},68:function(e,t,a){e.exports=a(124)},94:function(e,t,a){}},[[68,1,2]]]);
//# sourceMappingURL=main.41a134c3.chunk.js.map